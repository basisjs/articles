<!DOCTYPE HTML>
<html lang="en-US" manifest="./manifest.appcache">
    
    <head>
        
        <meta charset="UTF-8">
        <title>L10n | Содержание</title>
        <meta content="text/html; charset=utf-8" http-equiv="Content-Type">
        <meta name="description" content="">
        <meta name="generator" content="GitBook 0.6.1">
        <meta name="HandheldFriendly" content="true"/>
        <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
        <meta name="apple-mobile-web-app-capable" content="yes">
        <meta name="apple-mobile-web-app-status-bar-style" content="black">
        <link rel="shortcut icon" href="gitbook/images/favicon.ico" type="image/x-icon">
        
    
    
    <meta name="author" content="basisjs">
    
    
    <link rel="next" href="./basis.net.html" />
    
    
    <link rel="prev" href="./basis.template_theme.html" />
    

        
    </head>
    <body>
        
        
<link rel="stylesheet" href="gitbook/style.css">


        
    <div class="book" data-github="basisjs/articles" data-level="9" data-basepath="." data-revision="1464472063967">
    <div class="book-header">
    <!-- Actions Left -->
    <a href="#" class="btn pull-left toggle-summary" aria-label="Toggle summary"><i class="fa fa-align-justify"></i></a>
    
    <a href="https://github.com/basisjs/articles" target="_blank" class="btn pull-left home-bookmark" aria-label="GitHub home"><i class="fa fa-bookmark-o"></i></a>
    
    <a href="#" class="btn pull-left toggle-search" aria-label="Toggle search"><i class="fa fa-search"></i></a>
    <span id="font-settings-wrapper">
        <a href="#" class="btn pull-left toggle-font-settings" aria-label="Toggle font settings"><i class="fa fa-font"></i>
        </a>
        <div class="dropdown-menu font-settings">
    <div class="dropdown-caret">
        <span class="caret-outer"></span>
        <span class="caret-inner"></span>
    </div>

    <div class="btn-group btn-block">
        <button id="reduce-font-size" class="btn btn-default">A</button>
        <button id="enlarge-font-size" class="btn btn-default">A</button>
    </div>

    <ul class="list-group font-family-list">
        <li class="list-group-item" data-font="0">Serif</li>
        <li class="list-group-item" data-font="1">Sans</li>
    </ul>

    <div class="btn-group btn-group-xs btn-block color-theme-list">
        <button type="button" class="btn btn-default" id="color-theme-preview-0" data-theme="0">White</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-1" data-theme="1">Sepia</button>
        <button type="button" class="btn btn-default" id="color-theme-preview-2" data-theme="2">Night</button>
    </div>
</div>

    </span>

    <!-- Actions Right -->
    
    <a href="#" target="_blank" class="btn pull-right google-plus-sharing-link sharing-link" data-sharing="google-plus" aria-label="Share on Google Plus"><i class="fa fa-google-plus"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right facebook-sharing-link sharing-link" data-sharing="facebook" aria-label="Share on Facebook"><i class="fa fa-facebook"></i></a>
    
    
    <a href="#" target="_blank" class="btn pull-right twitter-sharing-link sharing-link" data-sharing="twitter" aria-label="Share on Twitter"><i class="fa fa-twitter"></i></a>
    

    
    <a href="https://github.com/basisjs/articles/stargazers" target="_blank" class="btn pull-right count-star hidden-xs"><i class="fa fa-star-o"></i> Star (<span>-</span>)</a>
    <a href="https://github.com/basisjs/articles/watchers" target="_blank" class="btn pull-right count-watch hidden-xs"><i class="fa fa-eye"></i> Watch (<span>-</span>)</a>
    

    <!-- Title -->
    <h1>
        <i class="fa fa-spinner fa-spin"></i>
        <a href="./" >Содержание</a>
    </h1>
</div>

    

<div class="book-summary">
    <div class="book-search">
        <input type="text" placeholder="Search" class="form-control" />
    </div>
    <ul class="summary">
        
        
        
        <li>
            <a href="https://github.com/basisjs" target="blank" class="author-link">About the author</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/basisjs/articles/issues" target="blank" class="issues-link">Questions and Issues</a>
        </li>
        

        
        
        <li>
            <a href="https://github.com/basisjs/articles/edit/master/basis.l10n.md" target="blank" class="contribute-link">Edit and Contribute</a>
        </li>
        

	

        
        <li class="divider"></li>
        

        
    
        
        <li class="chapter " data-level="0" data-path="index.html">
            
                
                    <a href="./index.html">
                        <i class="fa fa-check"></i>
                        
                         Introduction
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="1" data-path="get-started.html">
            
                
                    <a href="./get-started.html">
                        <i class="fa fa-check"></i>
                        
                            <b>1.</b>
                        
                         Приступая к разработке
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2" data-path="basis.html">
            
                
                    <a href="./basis.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.</b>
                        
                         Ядро
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="2.1" data-path="config.html">
            
                
                    <a href="./config.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.1.</b>
                        
                         Конфигурация
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.2" data-path="basis.Class.html">
            
                
                    <a href="./basis.Class.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.2.</b>
                        
                         Классы
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.3" data-path="resources.html">
            
                
                    <a href="./resources.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.3.</b>
                        
                         Модульность
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.4" data-path="basis.Token.html">
            
                
                    <a href="./basis.Token.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.4.</b>
                        
                         basis.Token
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="2.5" data-path="bindingbridge.html">
            
                
                    <a href="./bindingbridge.html">
                        <i class="fa fa-check"></i>
                        
                            <b>2.5.</b>
                        
                         Binding bridge
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="3" data-path="basis.event.html">
            
                
                    <a href="./basis.event.html">
                        <i class="fa fa-check"></i>
                        
                            <b>3.</b>
                        
                         События
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4" data-path="basis.data.html">
            
                
                    <a href="./basis.data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.</b>
                        
                         Данные
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="4.1" data-path="basis.data.Value.html">
            
                
                    <a href="./basis.data.Value.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.1.</b>
                        
                         Скаляр
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.2" data-path="basis.data.Object.html">
            
                
                    <a href="./basis.data.Object.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.2.</b>
                        
                         Объект
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.3" data-path="basis.data.datasets.html">
            
                
                    <a href="./basis.data.datasets.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.3.</b>
                        
                         Набор
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="4.4" data-path="basis.data.map.html">
            
                
                    <a href="./basis.data.map.html">
                        <i class="fa fa-check"></i>
                        
                            <b>4.4.</b>
                        
                         Карта
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="5" data-path="basis.data.dataset.html">
            
                
                    <a href="./basis.data.dataset.html">
                        <i class="fa fa-check"></i>
                        
                            <b>5.</b>
                        
                         basis.data.dataset
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6" data-path="basis.dom.wrapper.html">
            
                
                    <a href="./basis.dom.wrapper.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.</b>
                        
                         basis.dom.wrapper
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.1" data-path="basis.dom.wrapper_dom.html">
            
                
                    <a href="./basis.dom.wrapper_dom.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.1.</b>
                        
                         DOM
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2" data-path="basis.dom.wrapper_childNodes.html">
            
                
                    <a href="./basis.dom.wrapper_childNodes.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.</b>
                        
                         Дочерние узлы
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="6.2.1" data-path="basis.dom.wrapper_sorting.html">
            
                
                    <a href="./basis.dom.wrapper_sorting.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.1.</b>
                        
                         Сортировка
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.2.2" data-path="basis.dom.wrapper_grouping.html">
            
                
                    <a href="./basis.dom.wrapper_grouping.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.2.2.</b>
                        
                         Группировка
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="6.3" data-path="basis.dom.wrapper_data.html">
            
                
                    <a href="./basis.dom.wrapper_data.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.3.</b>
                        
                         Привязка данных
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.4" data-path="basis.dom.wrapper_owner.html">
            
                
                    <a href="./basis.dom.wrapper_owner.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.4.</b>
                        
                         Паттерн &quot;владелец&quot;
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.5" data-path="basis.dom.wrapper_satellite.html">
            
                
                    <a href="./basis.dom.wrapper_satellite.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.5.</b>
                        
                         Сателлиты
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.6" data-path="basis.dom.wrapper_disabled.html">
            
                
                    <a href="./basis.dom.wrapper_disabled.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.6.</b>
                        
                         Доступность (disabled/enabled)
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="6.7" data-path="basis.dom.wrapper_selection.html">
            
                
                    <a href="./basis.dom.wrapper_selection.html">
                        <i class="fa fa-check"></i>
                        
                            <b>6.7.</b>
                        
                         Выделение (selection)
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="7" data-path="basis.ui.html">
            
                
                    <a href="./basis.ui.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.</b>
                        
                         Интерфейс пользователя
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="7.1" data-path="basis.ui_template.html">
            
                
                    <a href="./basis.ui_template.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.1.</b>
                        
                         Привязка шаблонов
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.2" data-path="basis.ui_bindings.html">
            
                
                    <a href="./basis.ui_bindings.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.2.</b>
                        
                         Биндинги (bindings)
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="7.3" data-path="basis.ui_actions.html">
            
                
                    <a href="./basis.ui_actions.html">
                        <i class="fa fa-check"></i>
                        
                            <b>7.3.</b>
                        
                         Обратная связь (actions)
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="8" data-path="basis.template.html">
            
                
                    <a href="./basis.template.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.</b>
                        
                         Шаблоны
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="8.1" data-path="basis.template_format.html">
            
                
                    <a href="./basis.template_format.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.1.</b>
                        
                         Формат шаблонов
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.2" data-path="basis.template_bindings.html">
            
                
                    <a href="./basis.template_bindings.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.2.</b>
                        
                         Правила применения значений биндингам
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="8.3" data-path="basis.template_theme.html">
            
                
                    <a href="./basis.template_theme.html">
                        <i class="fa fa-check"></i>
                        
                            <b>8.3.</b>
                        
                         Темы
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter active" data-level="9" data-path="basis.l10n.html">
            
                
                    <a href="./basis.l10n.html">
                        <i class="fa fa-check"></i>
                        
                            <b>9.</b>
                        
                         L10n
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10" data-path="basis.net.html">
            
                
                    <a href="./basis.net.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.</b>
                        
                         basis.net
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="10.1" data-path="basis.net.ajax.html">
            
                
                    <a href="./basis.net.ajax.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.1.</b>
                        
                         basis.net.ajax
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.2" data-path="basis.net.action.html">
            
                
                    <a href="./basis.net.action.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.2.</b>
                        
                         basis.net.action
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="10.3" data-path="basis.net.service.html">
            
                
                    <a href="./basis.net.service.html">
                        <i class="fa fa-check"></i>
                        
                            <b>10.3.</b>
                        
                         basis.net.service
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    
        
        <li class="chapter " data-level="11" data-path="basis.router.html">
            
                
                    <a href="./basis.router.html">
                        <i class="fa fa-check"></i>
                        
                            <b>11.</b>
                        
                         basis.router
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12" data-path="tutorial/index.html">
            
                
                    <a href="./tutorial/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.</b>
                        
                         Руководство
                    </a>
                
            
            
            <ul class="articles">
                
    
        
        <li class="chapter " data-level="12.1" data-path="tutorial/part1/index.html">
            
                
                    <a href="./tutorial/part1/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.1.</b>
                        
                         Часть 1. Начало работы, представления, модули, инструменты
                    </a>
                
            
            
        </li>
    
        
        <li class="chapter " data-level="12.2" data-path="tutorial/part2/index.html">
            
                
                    <a href="./tutorial/part2/index.html">
                        <i class="fa fa-check"></i>
                        
                            <b>12.2.</b>
                        
                         Часть 2. Работа с данными: модели, наборы и значения
                    </a>
                
            
            
        </li>
    

            </ul>
            
        </li>
    


        
        <li class="divider"></li>
        <li>
            <a href="http://www.gitbook.io/" target="blank" class="gitbook-link">Generated using GitBook</a>
        </li>
        
    </ul>
</div>

    <div class="book-body">
        <div class="body-inner">
            <div class="page-wrapper" tabindex="-1">
                <div class="book-progress">
    <div class="bar">
        <div class="inner" style="width: 80.48780487804878%;min-width: 78.04878048780488%;"></div>
    </div>
    <div class="chapters">
    
        <a href="./index.html" title="Introduction" class="chapter done new-chapter" data-progress="0" style="left: 0%;"></a>
    
        <a href="./get-started.html" title="Приступая к разработке" class="chapter done new-chapter" data-progress="1" style="left: 2.4390243902439024%;"></a>
    
        <a href="./basis.html" title="Ядро" class="chapter done new-chapter" data-progress="2" style="left: 4.878048780487805%;"></a>
    
        <a href="./config.html" title="Конфигурация" class="chapter done " data-progress="2.1" style="left: 7.317073170731708%;"></a>
    
        <a href="./basis.Class.html" title="Классы" class="chapter done " data-progress="2.2" style="left: 9.75609756097561%;"></a>
    
        <a href="./resources.html" title="Модульность" class="chapter done " data-progress="2.3" style="left: 12.195121951219512%;"></a>
    
        <a href="./basis.Token.html" title="basis.Token" class="chapter done " data-progress="2.4" style="left: 14.634146341463415%;"></a>
    
        <a href="./bindingbridge.html" title="Binding bridge" class="chapter done " data-progress="2.5" style="left: 17.073170731707318%;"></a>
    
        <a href="./basis.event.html" title="События" class="chapter done new-chapter" data-progress="3" style="left: 19.51219512195122%;"></a>
    
        <a href="./basis.data.html" title="Данные" class="chapter done new-chapter" data-progress="4" style="left: 21.951219512195124%;"></a>
    
        <a href="./basis.data.Value.html" title="Скаляр" class="chapter done " data-progress="4.1" style="left: 24.390243902439025%;"></a>
    
        <a href="./basis.data.Object.html" title="Объект" class="chapter done " data-progress="4.2" style="left: 26.829268292682926%;"></a>
    
        <a href="./basis.data.datasets.html" title="Набор" class="chapter done " data-progress="4.3" style="left: 29.26829268292683%;"></a>
    
        <a href="./basis.data.map.html" title="Карта" class="chapter done " data-progress="4.4" style="left: 31.70731707317073%;"></a>
    
        <a href="./basis.data.dataset.html" title="basis.data.dataset" class="chapter done new-chapter" data-progress="5" style="left: 34.146341463414636%;"></a>
    
        <a href="./basis.dom.wrapper.html" title="basis.dom.wrapper" class="chapter done new-chapter" data-progress="6" style="left: 36.58536585365854%;"></a>
    
        <a href="./basis.dom.wrapper_dom.html" title="DOM" class="chapter done " data-progress="6.1" style="left: 39.02439024390244%;"></a>
    
        <a href="./basis.dom.wrapper_childNodes.html" title="Дочерние узлы" class="chapter done " data-progress="6.2" style="left: 41.46341463414634%;"></a>
    
        <a href="./basis.dom.wrapper_sorting.html" title="Сортировка" class="chapter done " data-progress="6.2.1" style="left: 43.90243902439025%;"></a>
    
        <a href="./basis.dom.wrapper_grouping.html" title="Группировка" class="chapter done " data-progress="6.2.2" style="left: 46.34146341463415%;"></a>
    
        <a href="./basis.dom.wrapper_data.html" title="Привязка данных" class="chapter done " data-progress="6.3" style="left: 48.78048780487805%;"></a>
    
        <a href="./basis.dom.wrapper_owner.html" title="Паттерн &quot;владелец&quot;" class="chapter done " data-progress="6.4" style="left: 51.21951219512195%;"></a>
    
        <a href="./basis.dom.wrapper_satellite.html" title="Сателлиты" class="chapter done " data-progress="6.5" style="left: 53.65853658536585%;"></a>
    
        <a href="./basis.dom.wrapper_disabled.html" title="Доступность (disabled/enabled)" class="chapter done " data-progress="6.6" style="left: 56.09756097560975%;"></a>
    
        <a href="./basis.dom.wrapper_selection.html" title="Выделение (selection)" class="chapter done " data-progress="6.7" style="left: 58.53658536585366%;"></a>
    
        <a href="./basis.ui.html" title="Интерфейс пользователя" class="chapter done new-chapter" data-progress="7" style="left: 60.97560975609756%;"></a>
    
        <a href="./basis.ui_template.html" title="Привязка шаблонов" class="chapter done " data-progress="7.1" style="left: 63.41463414634146%;"></a>
    
        <a href="./basis.ui_bindings.html" title="Биндинги (bindings)" class="chapter done " data-progress="7.2" style="left: 65.85365853658537%;"></a>
    
        <a href="./basis.ui_actions.html" title="Обратная связь (actions)" class="chapter done " data-progress="7.3" style="left: 68.29268292682927%;"></a>
    
        <a href="./basis.template.html" title="Шаблоны" class="chapter done new-chapter" data-progress="8" style="left: 70.73170731707317%;"></a>
    
        <a href="./basis.template_format.html" title="Формат шаблонов" class="chapter done " data-progress="8.1" style="left: 73.17073170731707%;"></a>
    
        <a href="./basis.template_bindings.html" title="Правила применения значений биндингам" class="chapter done " data-progress="8.2" style="left: 75.60975609756098%;"></a>
    
        <a href="./basis.template_theme.html" title="Темы" class="chapter done " data-progress="8.3" style="left: 78.04878048780488%;"></a>
    
        <a href="./basis.l10n.html" title="L10n" class="chapter done new-chapter" data-progress="9" style="left: 80.48780487804878%;"></a>
    
        <a href="./basis.net.html" title="basis.net" class="chapter  " data-progress="10" style="left: 82.92682926829268%;"></a>
    
        <a href="./basis.net.ajax.html" title="basis.net.ajax" class="chapter  " data-progress="10.1" style="left: 85.36585365853658%;"></a>
    
        <a href="./basis.net.action.html" title="basis.net.action" class="chapter  " data-progress="10.2" style="left: 87.8048780487805%;"></a>
    
        <a href="./basis.net.service.html" title="basis.net.service" class="chapter  " data-progress="10.3" style="left: 90.2439024390244%;"></a>
    
        <a href="./basis.router.html" title="basis.router" class="chapter  " data-progress="11" style="left: 92.6829268292683%;"></a>
    
        <a href="./tutorial/index.html" title="Руководство" class="chapter  " data-progress="12" style="left: 95.1219512195122%;"></a>
    
        <a href="./tutorial/part1/index.html" title="Часть 1. Начало работы, представления, модули, инструменты" class="chapter  " data-progress="12.1" style="left: 97.5609756097561%;"></a>
    
        <a href="./tutorial/part2/index.html" title="Часть 2. Работа с данными: модели, наборы и значения" class="chapter  " data-progress="12.2" style="left: 100%;"></a>
    
    </div>
</div>

                <div class="page-inner">
                
                    <section class="normal" id="section-gitbook_1">
                    
                        <h1 id="basisl10n">basis.l10n</h1>
<p>Модуль <code>basis.l10n</code> обеспечивает <a href="http://ru.wikipedia.org/wiki/%D0%AF%D0%B7%D1%8B%D0%BA%D0%BE%D0%B2%D0%B0%D1%8F_%D0%BB%D0%BE%D0%BA%D0%B0%D0%BB%D0%B8%D0%B7%D0%B0%D1%86%D0%B8%D1%8F" target="_blank">локализацию</a>, то есть возможность использовать те или иные значения в зависимости от выбраной культуры (языка).</p>
<p>Этот модуль оперирует в рамках трех типов сущностей:</p>
<ul>
<li><a href="#Словарь">Словарь</a> – набор значений;</li>
<li><a href="#Культура">Культура</a> – язык и его настройки;</li>
<li><a href="#Токен">Токен</a> (значение) – непосредственное значение, которое используется.</li>
</ul>
<p>Локализация предоставляемая <code>basis.l10n</code> является полностью динамической, т.е. позволяет изменять выбранную культуру и содержимое словарей без перезагрузки страницы. В разработке могут использоваться <a href="#Инструменты">инструменты</a>, которые упрощают работу с локализацией.</p>
<h2 id="">Словарь</h2>
<p>Словарь – это интерфейс к набору значений, сгруппированых по культуре.</p>
<p>Содержимое словарей хранится в отдельных файлах с расширением <code>.l10n</code> в формате JSON. Ключи первого уровня являются кодами культуры, а значение – набор значений для словаря.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"Hello world!"</span>
  </span>}</span>,
  "<span class="hljs-attribute">ru-RU</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"Привет мир!"</span>
  </span>}
</span>}
</code></pre>
<p>Словари являются экземплярами класса <code>basis.l10n.Dictionary</code> и объявляются с помощью функции-хелпера <code>basis.l10n.dictionary</code>. Этой функции передается имя файла. Если для заданного имени уже существует словарь, то он возвращается, иначе создается новый.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(<span class="hljs-string">'path/to/dict.l10n'</span>);
</code></pre>
<p>Если расширение файла не соответствует <code>.l10n</code>, то оно заменяется на <code>.l10n</code>. Таким образом, можно использовать <code>__filename</code> (имя файла модуля), если имя файла словаря отличается от имени файла модуля только расширением.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(__filename);
</code></pre>
<p>Задаваемый путь к файлу разрешается относительно корня приложения. Если требуется указать путь относительно модуля, можно использовать локальную переменную <code>__dirname</code>.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(__dirname + <span class="hljs-string">'relative/path/to/dict.l10n'</span>);
</code></pre>
<p>Словарь предоставляет доступ к своим ключам посредством метода <code>token</code>, которому передается имя токена. Если токена с заданым именем нет, то он создается. Значением токена является значение из файла словаря для текущей культуры, с учетом альтернатив.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(__filename);
console.log(myDict.token(<span class="hljs-string">'hello'</span>).value);
<span class="hljs-comment">// console&gt; 'Hello world!'</span>

basis.l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
console.log(myDict.token(<span class="hljs-string">'hello'</span>).value);
<span class="hljs-comment">// console&gt; 'Привет мир!'</span>

console.log(myDict.token(<span class="hljs-string">'nonexistent'</span>).value);
<span class="hljs-comment">// console&gt; undefined</span>
</code></pre>
<p>В описании словаря поддерживается вложенность.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"Hello world!"</span></span>,
    "<span class="hljs-attribute">example</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"Foo"</span></span>,
      "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"Bar"</span>
    </span>}
  </span>}
</span>}
</code></pre>
<p>В таком случае именем токена является конкатенация ключей разделеных точкой (<code>.</code>).</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(<span class="hljs-string">'./path/to/dict.l10n'</span>);
console.log(myDict.token(<span class="hljs-string">'example'</span>).value);
<span class="hljs-comment">// console&gt; { foo: "Foo", bar: "Bar" }</span>
console.log(myDict.token(<span class="hljs-string">'example.foo'</span>).value);
<span class="hljs-comment">// console&gt; 'Foo'</span>
</code></pre>
<p>Описание словаря может содержать дополнительную информацию о словаре, для этого используется специальная секция <code>_meta</code>. Эта секция, в частности, используется для задания специальных типов для определенных ключей.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_meta</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">example</span>": <span class="hljs-value"><span class="hljs-string">"plural"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">hello</span>": <span class="hljs-value"><span class="hljs-string">"Hello world!"</span></span>,
    "<span class="hljs-attribute">example</span>": <span class="hljs-value">[<span class="hljs-string">"example"</span>, <span class="hljs-string">"examples"</span>]
  </span>}
</span>}
</code></pre>
<h2 id="">Культура</h2>
<p>Культура – это некоторые языковые правила.</p>
<p>У каждой культуры есть свой <a href="http://en.wikipedia.org/wiki/Language_localisation#Language_tags_and_codes" target="_blank">код</a> (обозначение). Он может быть любым, но рекомендуется придерживаться системы обозначения на основе стандарта <a href="http://en.wikipedia.org/wiki/ISO_639-1" target="_blank">ISO 639-1</a>. Так код должен состоять из основной части, двухбуквенного кода языковой семьи в нижнем регистре, и опциональной второй части, двухбуквенный код географической принадлежности в верхнем регистре. Например, <code>en-GB</code> – британский английский, <code>en-US</code> – американский английский, <code>en-CA</code> – канадский английский и т.д.</p>
<p>Используемые приложением культуры объявляются функцией <code>basis.l10n.setCultureList</code>. А функция <code>basis.l10n.getCultureList</code> возвращает текущий список используемых культур. Список не может быть пустым.</p>
<pre><code class="lang-js">basis.l10n.setCultureList(<span class="hljs-string">'ru-RU en-US'</span>);
<span class="hljs-comment">// альтернативный вариант</span>
basis.l10n.setCultureList([<span class="hljs-string">'ru-RU'</span>, <span class="hljs-string">'en-US'</span>]);

console.log(basis.l10n.getCultureList());
<span class="hljs-comment">// console&gt; ['ru-RU', 'en-US']</span>
</code></pre>
<p>За каждой культурой в словарях закрепляются определенные значения. Если определенного значения нет для заданной культуры, то значение может быть взято из значений для другой культуры. По умолчанию, такой культурой является первая в списке, заданном <code>basis.l10n.setCultureList</code> (считается, что первая культура наиболее полная). Для любой культуры можно задать альтернативу – при объявлении списка культур. Для этого после обозначения культуры нужно поставить <code>/</code> (слеш) и далее указать обозначение альтернативной культуры. Можно задать только одну альтернативу, но при этом используется альтернативная культура альтернативной культуры и далее по цепочке.</p>
<pre><code class="lang-js">basis.l10n.setCultureList(<span class="hljs-string">'en-US ru-RU uk-UK/ru-RU xx-XX/uk-UK'</span>);
<span class="hljs-comment">// для ru-RU поиск будет ru-RU -&gt; en-US</span>
<span class="hljs-comment">// для uk-UK: uk-UK -&gt; ru-RU -&gt; en-US</span>
<span class="hljs-comment">// для xx-XX: xx-XX -&gt; uk-UK -&gt; ru-RU -&gt; en-US</span>
</code></pre>
<p>Текущая культура определяет, какой набор значений словаря должен использоваться. Ее код возвращает функция <code>basis.l10n.getCulture</code>. Текущая культура может быть изменена в любой момент с помощью функции <code>basis.l10n.setCulture</code>, которой передается код культуры. Код культуры, задаваемой в качестве текущей, должен быть в списке культур, определенном функцией <code>basis.l10n.setCultureList</code>. При смене текущей культуры, словари обновляют свои значения согласной выбранной культуре и правилам альтернатив (это происходит без перезагрузки страницы).</p>
<pre><code class="lang-js">basis.l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);

console.log(basis.l10n.getCulture());
<span class="hljs-comment">// console&gt; 'ru-RU'</span>
</code></pre>
<p>С помощью функции <code>basis.l10n.onCultureChange(fn, context, fire)</code> можно задать функцию-обработчик на изменение текущей культуры. Эта функция принимает до трех аргументов:</p>
<ul>
<li>fn - функция, которая должна быть вызвана при изменении текущей культуры;</li>
<li>context - значение, которое будет выступать в качестве <code>this</code> вызываемой функции;</li>
<li>fire - добавляемая функция-обработчик, должна быть вызвана сразу после добавления.</li>
</ul>
<pre><code class="lang-js">basis.l10n.onCultureChange(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(culture)</span>{</span>
  console.log(<span class="hljs-string">'Current culture is '</span>, culture);
});

console.log(basis.l10n.getCulture());
<span class="hljs-comment">// console&gt; en-US</span>

basis.l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
<span class="hljs-comment">// console&gt; Current culture is ru-RU</span>
</code></pre>
<p>Культуры являются экземплярами класса <code>basis.l10n.Culture</code>, который содержат языковые настройки культуры. Экземпляр культуры можно получить с помощью функции-хелпера <code>basis.l10n.culture</code>. Эта функция возвращает культуру, ассоциированную с заданным кодом, а если таковой нет, то создает ее.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> culture = basis.l10n.culture(<span class="hljs-string">'ru-RU'</span>);
console.log(culture);
<span class="hljs-comment">// console&gt; basis.l10n.Culture { name: "ru-RU", ... }</span>

<span class="hljs-comment">// эквивалент</span>
<span class="hljs-keyword">var</span> culture = <span class="hljs-keyword">new</span> basis.l10n.Culture(<span class="hljs-string">'ru-RU'</span>);
console.log(culture);
<span class="hljs-comment">// console&gt; basis.l10n.Culture { name: "ru-RU", ... }</span>

<span class="hljs-comment">//</span>
console.log(basis.l10n.culture(<span class="hljs-string">'ru-RU'</span>) === basis.l10n.culture(<span class="hljs-string">'ru-RU'</span>));
<span class="hljs-comment">// console&gt; true</span>
</code></pre>
<p>Функция <code>basis.l10n.culture</code> расширена методами и свойствами <a href="basis.Token.html"><code>basis.Token</code></a>. Поэтому в большинстве случаев может использоваться как экземпляр <code>basis.Token</code>, хотя таковым не является. Например, в качестве значения для биндига (так как имеет интерфейс <a href="bindingbridge.html"><code>binding bridge</code></a>).</p>
<pre><code class="lang-js">basis.require(<span class="hljs-string">'basis.l10n'</span>);
basis.require(<span class="hljs-string">'basis.ui'</span>);

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> basis.ui.Node({
  template: <span class="hljs-string">'&lt;span&gt;Current culture is {currentCulture}&lt;/span&gt;'</span>,
  binding: {
    currentCulture: basis.l10n.culture
  }
});
</code></pre>
<p>Или как альтельнатива другим функциям.</p>
<pre><code class="lang-js"><span class="hljs-comment">// эквивалент getCulture</span>
console.log(basis.l10n.culture.get());
<span class="hljs-comment">// console&gt; en-US</span>
console.log(basis.l10n.culture.value);
<span class="hljs-comment">// console&gt; en-US</span>

<span class="hljs-comment">// эквивалент setCulture (с версии 1.0.1)</span>
basis.l10n.culture.set(<span class="hljs-string">'ru-RU'</span>);

<span class="hljs-comment">// эквивалент onCultureChange</span>
basis.l10n.culture.attach(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(culture)</span>{</span>
  console.log(<span class="hljs-string">'Current culture is '</span>, culture);
});
</code></pre>
<p>Для удаления обработчика на смену культуры нет специальной функции. Но это можно сделать импользуя метод <code>basis.l10n.culture.detach</code>.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myCultureChangeHandler = <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(culture)</span>{</span>
  console.log(<span class="hljs-string">'Current culture is '</span>, culture);
};

<span class="hljs-comment">// добавляем обработчик</span>
basis.l10n.onCultureChange(myCultureChangeHandler);

basis.l10n.getCulture();
<span class="hljs-comment">// console&gt; en-US</span>

basis.l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
<span class="hljs-comment">// console&gt; Current culture is ru-RU</span>
<span class="hljs-comment">// console&gt; undefined</span>

basis.l10n.culture.detach(myCultureChangeHandler);

basis.l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
<span class="hljs-comment">// не будет сообщений в консоли</span>
</code></pre>
<h2 id="">Токен</h2>
<p>Токены являются экземплярами класса <code>basis.l10n.Token</code>, который унаследован от <code>[basis.Token](basis.Token.md)</code>. Эти объекты хранят значение, которое соответствует текущей культуре.</p>
<p>Получить токен можно следующими способами:</p>
<ul>
<li>вызвав метод словаря <code>token(path)</code>;</li>
<li>используя функцию <code>basis.l10n.token(absolutePath)</code>; функции передается строка: ключ и путь к файлу словаря, разделенные символом <code>@</code>;</li>
<li>используя метод токена <code>token(name)</code>; таким образом можно получить вложенные токены.</li>
</ul>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">example</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"Foo"</span></span>,
      "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"Bar"</span>
    </span>}
  </span>}
</span>}
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(<span class="hljs-string">'./path/to/dict.l10n'</span>);

console.log(myDict.token(<span class="hljs-string">'example.foo'</span>));
<span class="hljs-comment">// console&gt; basis.l10n.Token { name: 'example.foo', value: 'Foo' }</span>

console.log(basis.l10n.token(<span class="hljs-string">'example.foo@path/to/dict.l10n'</span>));
<span class="hljs-comment">// console&gt; basis.l10n.Token { name: 'example.foo', value: 'Foo' }</span>

console.log(myDict.token(<span class="hljs-string">'example'</span>).token(<span class="hljs-string">'foo'</span>));
<span class="hljs-comment">// console&gt; basis.l10n.Token { name: 'example.foo', value: 'Foo' }</span>

console.log(myDict.token(<span class="hljs-string">'example.foo'</span>) === basis.l10n.token(<span class="hljs-string">'example.foo@path/to/dict.l10n'</span>));
<span class="hljs-comment">// console&gt; true</span>
</code></pre>
<h3 id="-">Типы токенов</h3>
<p>Токен может быть одного трех типов:</p>
<ul>
<li><code>default</code> - обычная строка, назначается по умолчанию;</li>
<li><code>plural</code> - <a href="http://ru.wikipedia.org/wiki/%D0%93%D1%80%D0%B0%D0%BC%D0%BC%D0%B0%D1%82%D0%B8%D1%87%D0%B5%D1%81%D0%BA%D0%BE%D0%B5_%D1%87%D0%B8%D1%81%D0%BB%D0%BE" target="_blank">грамматическое число</a> (единственное и множественное числа), значение склоняемое в зависимости от числа;</li>
<li><code>markup</code> - строка, содержащая <code>HTML</code> разметку.</li>
</ul>
<p>Тип задается в секции <code>_meta</code> описания словаря, в секции <code>type</code>. Тип накладывается на полный путь токена и является одинаковым для всех культур словаря. Если для пути токена не определен тип или значение типа является неверным, используется тип <code>default</code>.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_meta</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">bar</span>": <span class="hljs-value"><span class="hljs-string">"plural"</span></span>,
      "<span class="hljs-attribute">baz</span>": <span class="hljs-value"><span class="hljs-string">"markup"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">foo</span>": <span class="hljs-value"><span class="hljs-string">"Default"</span></span>,
    "<span class="hljs-attribute">bar</span>": <span class="hljs-value">[<span class="hljs-string">"bar"</span>, <span class="hljs-string">"bars"</span>]</span>,
    "<span class="hljs-attribute">baz</span>": <span class="hljs-value"><span class="hljs-string">"&lt;h1&gt;Markup token&lt;/h1&gt;"</span>
  </span>}
</span>}
</code></pre>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(<span class="hljs-string">'path/to/dict.l10n'</span>);

console.log(myDict.token(<span class="hljs-string">'foo'</span>).type);
<span class="hljs-comment">// console&gt; 'default'</span>

console.log(myDict.token(<span class="hljs-string">'bar'</span>).type);
<span class="hljs-comment">// console&gt; 'plural'</span>

console.log(myDict.token(<span class="hljs-string">'baz'</span>).type);
<span class="hljs-comment">// console&gt; 'markup'</span>
</code></pre>
<h4 id="plural">Plural</h4>
<p>Для указания, что токен является <code>plural</code>, нужно явно указать тип токена в секции <code>_meta</code> словаря. Значение для таких токенов задается в виде массива, где каждый элемент является формой фразы в зависимости от некоторого числа. Количество форм и функция выбора формы зависит от культуры, например, в русском языке 3 формы, а в английском – 2.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_meta</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">example</span>": <span class="hljs-value"><span class="hljs-string">"plural"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">example</span>": <span class="hljs-value">[<span class="hljs-string">"example"</span>, <span class="hljs-string">"examples"</span>]
  </span>}</span>,
  "<span class="hljs-attribute">ru-RU</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">example</span>": <span class="hljs-value">[<span class="hljs-string">"пример"</span>, <span class="hljs-string">"примера"</span>, <span class="hljs-string">"примеров"</span>]
  </span>}
</span>}
</code></pre>
<p>В <code>basis.l10n</code> уже определены функции выбора формы для большинства культур (языков). При определении формы заданное значение приводится к числу, от числа отбрасывается дробная часть, знак и лишь тогда вычисляется подходящая форма. Доступные функции выбора формы можно получить в виде массива, обратившись к свойству <code>basis.l10n.pluralForms</code>. Всего определена 21 форма.</p>
<p>Чтобы получить значение для некоторого числа, необходимо использовать методы <code>basis.l10n.Token#token()</code> или <code>basis.l10n.Token#computeToken()</code>.</p>
<p>Метод <code>basis.l10n.Token#token()</code> может подойти в простых случаях, когда нужно получить значение без сохранения динамических свойств.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> l10n = basis.require(<span class="hljs-string">'basis.l10n'</span>);
<span class="hljs-keyword">var</span> myDict = l10n.dictionary(__filename);
<span class="hljs-keyword">var</span> staticPluralToken = myDict.token(<span class="hljs-string">'example'</span>).token(<span class="hljs-number">5</span>);

console.log(staticPluralToken.get());
<span class="hljs-comment">// examples</span>

l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
console.log(staticPluralToken.get());
<span class="hljs-comment">// примера</span>
</code></pre>
<p>Как видно из примера, метод <code>basis.l10n.Token#token()</code> получает необходимую форму (в примере от значения <code>5</code>) и возвращает ее текущее значение. Но само значение, для которого была вычислена форма, не сохраняется. Поэтому такой токен всегда будет возвращать значение для одной и той же формы. В примере, при переключении культуры, по-прежнему была взята вторая форма (или первая, если считать с нуля), а не правильная форма для числа <code>5</code>.</p>
<p>Для сохранения динамических свойств необходимо сохранять значение, для которого вычисляется форма. В этом случае, используются токены произведенные методом <code>basis.l10n.Token#computeToken()</code>. Полученный этим методом токен, хранит значение и его можно изменить используя метод <code>set(value)</code>. Токен перевычисляет форму при изменении значения, словаря или культуры.</p>
<pre><code class="lang-js"><span class="hljs-keyword">var</span> myDict = basis.require(<span class="hljs-string">'basis.l10n'</span>).dictionary(__filename);
<span class="hljs-keyword">var</span> dynamicPluralToken = myDict.token(<span class="hljs-string">'example'</span>).computeToken(<span class="hljs-number">1</span>);
console.log(dynamicPluralToken.get());
<span class="hljs-comment">// example</span>

dynamicPluralToken.set(<span class="hljs-number">5</span>);
console.log(dynamicPluralToken.get());
<span class="hljs-comment">// examples</span>

l10n.setCulture(<span class="hljs-string">'ru-RU'</span>);
console.log(dynamicPluralToken.get());
<span class="hljs-comment">// примеров</span>

dynamicPluralToken.set(<span class="hljs-number">2</span>);
console.log(dynamicPluralToken.get());
<span class="hljs-comment">// примера</span>
</code></pre>
<h4 id="markup">Markup</h4>
<p>Значения этого типа могут содержать разметку (в остальных типах разметка экранируется). Но ключевое - такие значения являются описанием шаблона и поддерживают полный синтаксис шаблонов. В том числе, в их описании можно использовать биндинги, подключать другие шаблоны, стили, а также использовать другие <code>l10n</code> из того же словаря или других словарей.</p>
<pre><code class="lang-json">{
  "<span class="hljs-attribute">_meta</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">type</span>": <span class="hljs-value">{
      "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"markup"</span></span>,
      "<span class="hljs-attribute">content</span>": <span class="hljs-value"><span class="hljs-string">"markup"</span>
    </span>}
  </span>}</span>,
  "<span class="hljs-attribute">en-US</span>": <span class="hljs-value">{
    "<span class="hljs-attribute">header</span>": <span class="hljs-value"><span class="hljs-string">"Header"</span></span>,
    "<span class="hljs-attribute">description</span>": <span class="hljs-value"><span class="hljs-string">"&lt;p&gt;Some value: {value}&lt;/p&gt;&lt;b:include src=\"en.tmpl\"/&gt;"</span></span>,
    "<span class="hljs-attribute">content</span>": <span class="hljs-value"><span class="hljs-string">"&lt;h1&gt;{l10n:header}&lt;/h1&gt;&lt;div class=\"content\"&gt;{l10:description}&lt;/div&gt;"</span>
  </span>}
</span>}
</code></pre>
<p>В данном примере два <code>markup</code> токена. Первый (<code>description</code>) использует биндинг <code>{value}</code>, а также подключает содержимое из файла <code>en.tmpl</code> (путь к файлу разрешается относительно файла словаря). Второй (<code>content</code>) используется два <code>l10n</code> биндинга, и в этом случае значения будут браться из самого словаря (так как содержимое &quot;шаблона&quot; описано в словаре).</p>
<p>При вставке в шаблон, содержимое <code>markup</code> токена оборачивается в <code>&lt;span class=&quot;basisjs-markup&quot;&gt;&lt;/span&gt;</code>.</p>
<p>На данный момент, сборщик <code>basisjs-tools</code> не поддерживает <code>markup</code> токены (текущий подход в построении декларации не дает возможности полноценно поддерживать такой тип токенов в сборке). Поэтому по умолчанию <code>markup</code> токены &quot;выключены&quot;, а для включения необходимо присвоить <code>true</code> флагу <code>enableMarkup</code>.</p>
<pre><code class="lang-js">basis.l10n.enableMarkup = <span class="hljs-literal">true</span>;

<span class="hljs-comment">// Важно, так работать не будет:</span>
basis.require(<span class="hljs-string">'basis.l10n'</span>).enableMarkup = <span class="hljs-literal">true</span>;
</code></pre>
<h2 id="--">Использование в шаблонах</h2>
<p>Так как класс <code>basis.l10n.Token</code> наследуется от <code>basis.Token</code>, то токены имеют интерфейс <a href="bindingbridge.html"><code>binding bridge</code></a>) и могут использоваться в биндигах, как сами по себе, так и в качестве результата <code>getter</code>.</p>
<pre><code class="lang-js">basis.require(<span class="hljs-string">'basis.l10n'</span>);
basis.require(<span class="hljs-string">'basis.ui'</span>);

<span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(__filename);

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> basis.ui.Node({
  ...
  binding: {
    foo: myDict.token(<span class="hljs-string">'foo'</span>),
    enum: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span>{</span>  <span class="hljs-comment">// статичный биндинг</span>
      <span class="hljs-keyword">return</span> node.data.value == <span class="hljs-number">0</span>
        ? myDict.token(<span class="hljs-string">'bar.zero'</span>)
        : myDict.token(<span class="hljs-string">'bar.non-zero'</span>);
    },
    stateCaption: {
      events: <span class="hljs-string">'stateChanged'</span>,
      getter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span>{</span>
        <span class="hljs-keyword">return</span> myDict.token(<span class="hljs-string">'state'</span>).token(node.state);
      }
    },
    plural: {
      events: <span class="hljs-string">'update'</span>,
      getter: <span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span>{</span>
        <span class="hljs-keyword">return</span> myDict.token(<span class="hljs-string">'baz'</span>).token(node.data.value);
      }
    }
  }
});
</code></pre>
<p>Токены также имеют метод <code>compute(events, getter)</code>, который упрощает описание <code>plural</code> и <code>enum</code> биндингов. Метод принимает параметры:</p>
<ul>
<li>events - список событий (строка, имена разделеные пробелом, или массив строк) владельца биндинга, при которых нужно пересчитывать значение; параметр является опциональным, и может быть опущен (в этом случае биндинг будет считаться только раз, при создании шаблона);</li>
<li>getter - функция, получающая в качестве аргумента владельца биндинга; результат, возвращаемый функцией, используется как имя для получения вложенного токена.</li>
</ul>
<p>Используя этот метод, предыдущий пример можно переписать так:</p>
<pre><code class="lang-js">basis.require(<span class="hljs-string">'basis.l10n'</span>);
basis.require(<span class="hljs-string">'basis.ui'</span>);

<span class="hljs-keyword">var</span> myDict = basis.l10n.dictionary(__filename);

<span class="hljs-keyword">var</span> view = <span class="hljs-keyword">new</span> basis.ui.Node({
  ...
  binding: {
    foo: myDict.token(<span class="hljs-string">'foo'</span>),
    enum: myDict.token(<span class="hljs-string">'bar'</span>).compute(<span class="hljs-function"><span class="hljs-keyword">function</span><span class="hljs-params">(node)</span>{</span>
      <span class="hljs-keyword">return</span> node.data.value == <span class="hljs-number">0</span> ? <span class="hljs-string">'zero'</span> : <span class="hljs-string">'non-zero'</span>;
    }),
    stateCaption: myDict.token(<span class="hljs-string">'state'</span>).compute(<span class="hljs-string">'stateChanged'</span>, <span class="hljs-string">'state'</span>),
    plural: myDict.token(<span class="hljs-string">'baz'</span>).compute(<span class="hljs-string">'update'</span>, <span class="hljs-string">'data.value'</span>)
  }
});
</code></pre>
<p>Токены можно использовать в шаблоне напрямую, без получения через биндинги. Для этого используются маркеры с префикcом <code>l10n:</code>. Маркеры с префиксом <code>l10n:</code> можно использовать для текстовых узлов и в атрибутах.</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"{l10n:attr.example}: {value}"</span>&gt;</span>
  {l10n:example}
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Для маркеров с префиксом <code>l10n:</code> допускается использование биндинга в качестве последней части пути. Это применяется для перечислений (<code>enum</code> токены) и грамматического числа (<code>plural</code> токены). Таким образом при изменении значения биндинга значение в шаблоне будет перевычисляться (выбираться тот или иной токен).</p>
<pre><code>&lt;div class=&quot;example&quot;&gt;
  Enum: {l10n:state.{state}}&lt;br/&gt;
  Plural: {l10n:plural.{number}}
&lt;/div&gt;
</code></pre><p>Файл словаря указывается с помощью тега <code>&lt;b:l10n&gt;</code>, в котором в атрибуте <code>src</code> указывается путь к файлу (относительно шаблона). Если имя файла словаря отличается от имени файла шаблона только разрешением (например, путь к файлу шаблона <code>path/to/template.tmpl</code>, а путь к словарю <code>path/to/template.l10n</code>), то указывать тег <code>&lt;b:l10n&gt;</code> необязательно (обычно не указывается).</p>
<pre><code class="lang-html"><span class="hljs-tag">&lt;<span class="hljs-title">b:l10n</span> <span class="hljs-attribute">src</span>=<span class="hljs-value">"./path/to/dict.l10n"</span>/&gt;</span>

<span class="hljs-tag">&lt;<span class="hljs-title">div</span> <span class="hljs-attribute">title</span>=<span class="hljs-value">"{l10n:attr.example}: {value}"</span>&gt;</span>
  {l10n:example}
<span class="hljs-tag">&lt;/<span class="hljs-title">div</span>&gt;</span>
</code></pre>
<p>Шаблон использует словарь, только если в описании шаблона есть хотя бы один маркер с префиксом <code>l10n:</code>. Заданный (явно или неявно) словарь применяется только для маркеров в самом описании шаблона, и на включаемые описания (подключаемые через <code>&lt;b:include&gt;</code>) не распространяется.</p>
<h2 id="">Инструменты</h2>
<p>Для работы с локализацией можно использовать панель разработчика <code>basis.devpanel</code> и <a href="https://chrome.google.com/webstore/detail/basisjs-tools/paeokpmlopbdaancddhdhmfepfhcbmek" target="_blank">плагин</a> для <code>Google Chrome</code>.</p>
<p><img src="img/basis.l10n-devpanel.png" alt="basis.devpanel"></p>
<p>На панели разработчика локализация представлена двумя кнопками. Одна показывает текущую культуру и позволяет сменить ее. Вторая включает режим выбора токена.</p>
<p><img src="img/basis.l10n-inspect-mode.png" alt="l10n inspect mode"></p>
<p>В режиме выбора токена, подсвечиваются все текстовые узлы, которые привязаны к токену <code>basis.l10n</code>. Другими словами, весь переводимый текст. Без плагина клик по любому подсвеченному блоку ни к чему не приводит. Но если плагин установлен и активирован в <code>Developer tools</code>, то в плагине откроется словарь, к которому относится токен, а поле редактирования токена получит фокус.</p>
<p><img src="img/basis.l10n-plugin.png" alt="l10n inspect mode"></p>
<p>Плагин позволяет менять содержимое словаря. Любые изменения тут же применяются без перезагрузки страницы.</p>
<p>При использовании <code>basis server</code>, плагин также может сохранять изменения в файл.</p>

                    
                    </section>
                
                </div>
            </div>
        </div>

        
        <a href="./basis.template_theme.html" class="navigation navigation-prev " aria-label="Previous page: Темы"><i class="fa fa-angle-left"></i></a>
        
        
        <a href="./basis.net.html" class="navigation navigation-next " aria-label="Next page: basis.net"><i class="fa fa-angle-right"></i></a>
        
    </div>
</div>

        
<script src="gitbook/jsrepl/jsrepl.js" id="jsrepl-script"></script>
<script src="gitbook/app.js"></script>

    
    <script src="https://cdn.mathjax.org/mathjax/2.0-latest/MathJax.js?config=TeX-AMS-MML_HTMLorMML"></script>
    

    
    <script src="gitbook/plugins/gitbook-plugin-mathjax/plugin.js"></script>
    

<script>
require(["gitbook"], function(gitbook) {
    var config = {"fontSettings":{"theme":"white","family":"sans","size":1}};
    gitbook.start(config);
});
</script>

        
    </body>
    
</html>
